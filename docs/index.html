<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GameDB: Main Page</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GameDB
   &#160;<span id="projectnumber">1.5.0</span>
   </div>
   <div id="projectbrief">GameDB Pro is a plugin that provides an easy to use and powerful game and meta data editor</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('index.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">GameDB Documentation</div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#mainpage">Usage Guide </a><ul><li class="level2"><a href="#overview">Overview</a></li>
<li class="level2"><a href="#getting-started">Getting Started</a></li>
<li class="level2"><a href="#usage-in-game">Usage In Game</a></li>
<li class="level2"><a href="#editing-in-game">Editing in-game</a></li>
<li class="level2"><a href="#data-types">Data Types</a></li>
<li class="level2"><a href="#advanced-usage">Advanced Usage</a><ul><li class="level3"><a href="#add-an-existing-gamedb">Add an existing gameDB</a></li>
<li class="level3"><a href="#importing-enums">Importing Enums</a></li>
<li class="level3"><a href="#hot-reloading">Hot Reloading</a></li>
<li class="level3"><a href="#settings">Settings</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="mainpage"></a>
Usage Guide </h1>
<h2><a class="anchor" id="overview"></a>
Overview</h2>
<p>GameDB is a Unity Plugin that provides an easy to use and powerful game and meta data editor. With this asset your scripts no longer have to use hard-coded references and instead can refer to your database for lists of values, files, prefabs, and other data types. GameDB is designed to produce JSON and associated classes to load and access this data easily within a game. It supports many data types, relationships between tables and hot-reloading to make working with game data easy and intuitive.</p>
<p>Some examples of usages would be for data relating to things like Loot tables, NPC balancing data, Prefab lookups for procedural assets, game configuration, and many many more.</p>
<div class="image">
<img src="https://github.com/reefbarman/gamedb-unity-plugin/blob/master/Images/GameDB.png" alt="Screenshot of GameDB Unity Editor"/>
</div>
<h2><a class="anchor" id="getting-started"></a>
Getting Started</h2>
<p>The GameDB Editor window is opened via navigating to <em>Window &gt; GameDB</em> menu and clicking on Open Editor menu item.</p>
<p>To get started creating and editing a gameDB click on the <em>Create GameDB</em> button. This will ask you to select a location to save your gameDB. When you click OK this will create two files a .json and .schema.json file in the directory chosen (recommended location is within a Resources folder as using Resources.Load is one of the easier ways to access the data).</p>
<p>The gameDB will then be loaded and ready to edit.</p>
<p>The first thing to do with your new gameDB is set a Scope Name for the gameDB. This name will be appended to the namespace of the exported C# classes your gameDB creates. For example a scope name of “MyData” would produce the namespace GameDBMyData. This scope name is also used as an identifier for various other things explained in more detail later.</p>
<p>Next you can create tables by entering a <em>Table Name</em>, select a key type and clicking on <em>Create Table</em>. This will create a table below that is collapsed by default. Click on the table name and it will expand to show your table. By default this will be a table with no keys or fields.</p>
<p>To create a field click on the <em>Edit Table</em> button, then enter a <em>Field Name</em> under the <em>Modify Schema</em> section. Select a data Type, check the tick-box for whether you would like it to be an array of data and then click <em>Create Field</em>.</p>
<p>This will then add a field to your table that can be removed with the [x] button (only visible after clicking <em>Edit Table</em>) if required.</p>
<p>To add some data enter a Key in the field at the top of the table then click <em>Create Key</em>. This will create a entry in the table below where you can now enter data for each of your fields.</p>
<p>Once you are happy with the data you have entered you can save the gameDB by clicking on <em>Save GameDB</em>, this will serialise out the data and the schema to the location selected earlier.</p>
<p>Next to use the data in your game you need to export the C# classes that will allow you to access the data. To do this click <em>Generate Classes</em> and select where to export the classes. This will generate C# classes that will provide easy and strongly typed access to your data.</p>
<h2><a class="anchor" id="usage-in-game"></a>
Usage In Game</h2>
<p>You are free to use the json data however you like but the GameDB plugin generates code based on your data schema that provides an easy way to integrate the data with your game.</p>
<p>When you click <em>Generate Classes</em> this will generate code in the selected location that provide access to the data. Each of the classes will be namespaced with a name like GameDB{SCOPE_NAME_HERE} for example: GameDBMain. These are auto-generated classes and hand editing of the files is generally not recommended.</p>
<p>The main class that represents your game data is the GameDB class. This class will load the json, deserialize it and provide access to each of the loaded tables. The GameDB class also has a OnDBLoaded event that is triggered when the data is loaded.</p>
<p>An example of loading the game data:</p>
<div class="fragment"><div class="line"><span class="keyword">using</span> GameDBMain;</div><div class="line"><span class="keyword">using</span> <a class="code" href="namespace_unity_engine.html">UnityEngine</a>;</div><div class="line"></div><div class="line"><span class="keyword">public</span> <span class="keyword">class </span>Test : MonoBehaviour</div><div class="line">{</div><div class="line">    <span class="keywordtype">void</span> Start ()</div><div class="line">    {</div><div class="line">        <span class="comment">//A name is given when instantiating to identify the gameDB when editing during play</span></div><div class="line">        GameDB gameDb = <span class="keyword">new</span> GameDB(<span class="stringliteral">&quot;MyGameDB&quot;</span>);</div><div class="line">        gameDb.OnDBLoaded = delegate() {</div><div class="line">            <span class="comment">//Access game data here once the DB is loaded</span></div><div class="line">        };</div><div class="line"></div><div class="line">        <span class="comment">//Load the json from the resources folder</span></div><div class="line">        gameDb.Load(<span class="stringliteral">&quot;GameDBs/gameDB&quot;</span>);</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>A few classes are then created for each of the tables defined in your game data. There is a Table, Schema and Row class. Normally prefixed with the table name for example MyDataTable.cs, MyDataSchema.cs and MyData.cs. The Table class provides accessors for getting a particular row by Key or getting all the rows as a dictionary. The Schema class provides static accessors for the table name, field names and keys in the table. Lastly the Row class represents a particular row in your table and provides accessors for each field in the data.</p>
<p>An example of accessing data:</p>
<div class="fragment"><div class="line">gameDb.OnDBLoaded = delegate() {</div><div class="line">    <span class="comment">//Access game data here once the DB is loaded</span></div><div class="line">    var shipPart = gameDb.ShipPartsTable.GetByKey(ShipPartsSchema.KeyWing);</div><div class="line"></div><div class="line">    Debug.Log(shipPart.CostVal);</div><div class="line"></div><div class="line">    <span class="keywordflow">foreach</span> (var loot <span class="keywordflow">in</span> gameDb.LootTable.GetRows())</div><div class="line">    {</div><div class="line">        Debug.Log(loot.Value.NameVal);</div><div class="line">    }</div><div class="line">};</div></div><!-- fragment --><h2><a class="anchor" id="editing-in-game"></a>
Editing in-game</h2>
<p>The gameDB can be edited while in game and hot-reloaded so you can balance while playing the game. If you have the GameDB Editor window opened when you are playing the game you can load one of the gameDBs you have loaded in the game by selecting the gameDB by its name in the <em>Runtime GameDB</em> dropdown, then selecting the base gameDB it was loaded from in the <em>Base GameDB</em> dropdown then clicking <em>Load GameDB</em>.</p>
<p>This will load the gameDB that is in memory in the game and allow you to edit it and then cause the data to reload in-game by clicking the <em>Reload In-Game</em> button. This will cause the OnDBLoaded event to be triggered on the gameDB in the game and when this happens your game code can react to the change in anyway it likes (see advanced topics for working with hot reloading).</p>
<p>The game data you edit while playing the game won’t be saved back to the json until you click the <em>Save GameDB</em> button, meaning you can experiment with changes while the game is running then if you stop playing the game without saving the gameDB those changes will be discarded.</p>
<h2><a class="anchor" id="data-types"></a>
Data Types</h2>
<p>Currently the GameDB plugin supports the following data types:</p>
<ul>
<li>String</li>
<li>Int32</li>
<li>Float</li>
<li>Bool</li>
<li>UnityEngine.Color</li>
<li>UnityEngine.Vector2</li>
<li>UnityEngine.Vector3</li>
<li>UnityEngine.Vector4</li>
<li>Prefabs (Version 1.2.0 and lower)<ul>
<li>Prefabs can be imported from the project and when settings data a drop down of imported prefabs will be available.</li>
<li>Prefabs must be imported from a resources folder as they are loaded via Resource.Load when accessed in game.</li>
<li>There are two accessors added into the generated Row class for each prefab field; one returning the path of the prefab and another returning the UnityEngine.Object representing the prefab.</li>
</ul>
</li>
<li>UnityEngine.Object ( Version 1.3.0 and higher (Pro only currently) )<ul>
<li>Supports the loading of any unity asset from the Resources folder ie Textures, Audio, Prefabs etc</li>
<li>UnityEngine.Objects must be imported from a resources folder as they are loaded via Resource.Load when accessed in game.</li>
<li>There are two accessors added into the generated Row class for each unityObject field; one returning the path of the UnityEngine.Object and another returning the UnityEngine.Object representing the unityObject.</li>
</ul>
</li>
<li>Enums (Pro version only)<ul>
<li>Enums are imported from game code and can be selected as a type. Then when setting data for the field a drop down is given of the enum members that can be selected.</li>
</ul>
</li>
<li>Table References (Pro version only)<ul>
<li>Fields can be a reference to another table within the gameDB. Then when setting data for the field a drop down is given with the keys of the referenced table</li>
<li>There are two accessors added into the generated Row class for each Table Reference field; one returns the string key of the entry and the other an instance of the row referenced.</li>
</ul>
</li>
</ul>
<p><em>Arrays</em></p>
<p>All the above data types can be stored as arrays. To modify the values of an array click on the [E] button next to the field and a popup will show allowing you to modify the size of the array and enter values for each index.</p>
<h2><a class="anchor" id="advanced-usage"></a>
Advanced Usage</h2>
<h3><a class="anchor" id="add-an-existing-gamedb"></a>
Add an existing gameDB</h3>
<p>If you have a gameDB from another project or being migrated from somewhere else (or the settings have been reset) you can load this by clicking on the <em>Add Existing GameDB</em> button. Make sure that both the .json and .schema.json files are in the same location together.</p>
<h3><a class="anchor" id="importing-enums"></a>
Importing Enums</h3>
<p>To import enums you will need to click on the <em>Configuration</em> Tab at the top of the editor window and expand the <em>Imported Enums</em> section. From here you can import and remove any enum you want.</p>
<h3><a class="anchor" id="hot-reloading"></a>
Hot Reloading</h3>
<p>To support editing the data while playing or support updates of the game data from a server while the client is running. The GameDB has a OnDBLoaded event that is triggered when data has be Imported or Reimported.</p>
<p>Generally data shouldn’t be directly referenced from the gameDB due to overhead with runtime conversions of types (and loading prefabs for the prefab type). Best practice is to cache the values from the gameDB into your game classes for further access.</p>
<p>This means that when the OnDBLoaded event is triggered again you will need to likely re-cache any data you accessed as well as reloading any systems that rely on this data.</p>
<p>This is quite different to how serialised fields work but it allows consistent and deliberate work flows when dealing with data edited at run-time or live updating from a server for example.</p>
<h3><a class="anchor" id="settings"></a>
Settings</h3>
<p>The GameDB editor creates a GameDBEditor.settings file in the same location as the plugin under the Editor folder. This file is a JSON file representing the settings that represent your workspace. This can be edited by hand in the event of settings causing any issue. This file contains the paths of the loaded gameDBs, the export path for C# classes and paths to any imported items, plus more. </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
